import{c as D,y as M,k as y,J as O,r as V,w as r,o as W,h as S,l as x,m as _,n as C,H as E,O as N,Q as T,x as k,v as s,ao as B,N as j,aN as z,a9 as J,aJ as P,a1 as b,_ as U}from"./index-D-LNuSJR.js";const H=D({__name:"Dropdown",props:{miniWidget:{}},setup(w){var m,c;const i=M();let l;const u=w,n=y(()=>{var a;return((a=e.value.options.layout)==null?void 0:a.selectorOptions)||[]}),e=O(u).miniWidget,p=V(n.value.find(a=>{var t;return a.value===((t=u.miniWidget.options.lastSelected)==null?void 0:t.value)})||n.value[0]),o=V(((m=u.miniWidget.options.lastSelected)==null?void 0:m.value)||((c=n.value[0])==null?void 0:c.value));r(()=>i.miniWidgetManagerVars(e.value.hash).configMenuOpen,a=>{a===!0&&(i.showElementPropsDrawer(e.value.hash),setTimeout(()=>{i.miniWidgetManagerVars(e.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0}),r(p,a=>{i.updateElementOptions(e.value.hash,{...e.value.options,lastSelected:a})});const L=a=>{if(i.editingMode)return;const t=n.value.find(d=>d.value===a);t&&(o.value=a,e.value.options.dataLakeVariable&&z(e.value.options.dataLakeVariable.id,a),i.setMiniWidgetLastValue(e.value.hash,t.value))},v=()=>{e.value.options.dataLakeVariable&&(l=J(e.value.options.dataLakeVariable.id,a=>{o.value=a}),o.value=P(e.value.options.dataLakeVariable.id))};return r(()=>{var a;return(a=e.value.options.dataLakeVariable)==null?void 0:a.id},(a,t)=>{t&&l&&b(t,l),a&&v()}),W(()=>{(!e.value.options||Object.keys(e.value.options).length===0)&&(e.value.isCustomElement=!0,i.updateElementOptions(e.value.hash,{layout:{selectorOptions:[],align:"start",width:168},variableType:"string",dataLakeVariable:void 0})),e.value.options.dataLakeVariable?v():p.value=i.getMiniWidgetLastValue(e.value.hash)}),S(()=>{e.value.options.dataLakeVariable&&l&&b(e.value.options.dataLakeVariable.id,l)}),(a,t)=>{var d,h,f;return _(),x("div",{class:k(["flex w-full",((d=s(i).elementToShowOnDrawer)==null?void 0:d.hash)===s(e).hash&&s(i).editingMode?"bg-[#00000010] ":"border-0"]),style:j({width:"100%",justifyContent:(h=s(e).options.layout)==null?void 0:h.align}),onClick:t[1]||(t[1]=g=>s(i).editingMode&&s(i).showElementPropsDrawer(s(e).hash))},[C("div",null,[E(B,{modelValue:o.value,"onUpdate:modelValue":[t[0]||(t[0]=g=>o.value=g),L],items:n.value,"item-title":"name","item-value":"value",theme:"dark",density:"compact",variant:"filled","min-width":((f=s(e).options.layout)==null?void 0:f.width)||168,"hide-details":"",class:k(["text-white",{"pointer-events-none":s(i).editingMode}])},{default:N(()=>t[2]||(t[2]=[T(" > ")])),_:1,__:[2]},8,["modelValue","items","min-width","class"])])],6)}}}),Q=U(H,[["__scopeId","data-v-c89647cd"]]);export{Q as default};
