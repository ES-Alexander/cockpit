import{c as L,y as w,J as M,r as y,w as v,o as D,aM as F,h as W,l as h,m as V,H as C,s as x,x as c,v as o,ad as T,t as S,a9 as E,aJ as O,a1 as b,aN as U}from"./index-BllpJpx5.js";const _={key:0,class:"ml-3 mb-[3px] whitespace-nowrap"},B=L({__name:"Switch",props:{miniWidget:{}},setup(k){const t=w(),r=k,a=M(r).miniWidget,l=y(!0);let n;v(()=>t.miniWidgetManagerVars(a.value.hash).configMenuOpen,e=>{e===!0&&(t.showElementPropsDrawer(a.value.hash),setTimeout(()=>{t.miniWidgetManagerVars(a.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0});const u=()=>{a.value.options.dataLakeVariable&&(n=E(a.value.options.dataLakeVariable.id,e=>{l.value=e}),l.value=O(a.value.options.dataLakeVariable.id))};v(()=>{var e;return(e=a.value.options.dataLakeVariable)==null?void 0:e.id},(e,i)=>{i&&n&&b(i,n),e&&u()});const f=()=>{var e;t.editingMode||!((e=a.value.options.dataLakeVariable)!=null&&e.allowUserToChangeValue)||(t.setMiniWidgetLastValue(a.value.hash,l.value),U(a.value.options.dataLakeVariable.id,l.value))};return D(()=>{var e,i,s;(!r.miniWidget.options||Object.keys(r.miniWidget.options).length===0)&&(a.value.isCustomElement=!0,t.updateElementOptions(r.miniWidget.hash,{layout:{align:((e=a.value.options.layout)==null?void 0:e.align)||"center",color:((i=a.value.options.layout)==null?void 0:i.color)||"#FFFFFF",label:((s=a.value.options.layout)==null?void 0:s.label)||""},variableType:"boolean",dataLakeVariable:void 0,toggled:!0}),l.value=!0),a.value.options.dataLakeVariable?(a.value.options.dataLakeVariable.allowUserToChangeValue||F({...a.value.options.dataLakeVariable,allowUserToChangeValue:!0}),u()):l.value=t.getMiniWidgetLastValue(a.value.hash)}),W(()=>{a.value.options.dataLakeVariable&&n&&b(a.value.options.dataLakeVariable.id,n)}),(e,i)=>{var s,d,p,g;return V(),h("div",{class:c(["flex items-center h-[30px] px-4",((s=o(t).elementToShowOnDrawer)==null?void 0:s.hash)===o(a).hash&&o(t).editingMode?"bg-[#00000010] ":"border-0"]),onClick:i[1]||(i[1]=m=>o(t).editingMode&&o(t).showElementPropsDrawer(o(a).hash))},[C(T,{modelValue:l.value,"onUpdate:modelValue":i[0]||(i[0]=m=>l.value=m),"hide-details":"",color:((d=o(a).options.layout)==null?void 0:d.color)||"#FFFFFF",class:c([{"pointer-events-none":o(t).editingMode},"min-w-[35px]"]),onChange:f},null,8,["modelValue","color","class"]),((p=o(a).options.layout)==null?void 0:p.label)!==""?(V(),h("p",_,S((g=o(a).options.layout)==null?void 0:g.label),1)):x("",!0)],2)}}});export{B as default};
