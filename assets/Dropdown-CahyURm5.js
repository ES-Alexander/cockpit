import{c as M,y,k as O,J as W,r as b,w as p,o as S,h as x,l as C,m as _,n as E,H as T,O as N,Q as U,x as k,v as l,ao as B,N as j,aN as z,a9 as J,aJ as P,a1 as w,_ as H}from"./index-CccD1C_N.js";const I=M({__name:"Dropdown",props:{miniWidget:{}},setup(L){var c,h;const i=y();let s;const r=L,o=O(()=>{var a;return((a=e.value.options.layout)==null?void 0:a.selectorOptions)||[]}),e=W(r).miniWidget,v=b(o.value.find(a=>{var t;return a.value===((t=r.miniWidget.options.lastSelected)==null?void 0:t.value)})||o.value[0]),n=b(((c=r.miniWidget.options.lastSelected)==null?void 0:c.value)||((h=o.value[0])==null?void 0:h.value));p(()=>i.miniWidgetManagerVars(e.value.hash).configMenuOpen,a=>{a===!0&&(i.showElementPropsDrawer(e.value.hash),setTimeout(()=>{i.miniWidgetManagerVars(e.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0}),p(v,a=>{i.updateElementOptions(e.value.hash,{...e.value.options,lastSelected:a})});const D=a=>{var d;if(i.editingMode||!((d=e.value.options.dataLakeVariable)!=null&&d.allowUserToChangeValue))return;const t=o.value.find(u=>u.value===a);t&&(n.value=a,e.value.options.dataLakeVariable&&z(e.value.options.dataLakeVariable.id,a),i.setMiniWidgetLastValue(e.value.hash,t.value))},m=()=>{e.value.options.dataLakeVariable&&(s=J(e.value.options.dataLakeVariable.id,a=>{n.value=a}),n.value=P(e.value.options.dataLakeVariable.id))};return p(()=>{var a;return(a=e.value.options.dataLakeVariable)==null?void 0:a.id},(a,t)=>{t&&s&&w(t,s),a&&m()}),S(()=>{(!e.value.options||Object.keys(e.value.options).length===0)&&(e.value.isCustomElement=!0,i.updateElementOptions(e.value.hash,{layout:{selectorOptions:[],align:"start",width:168},variableType:"string",dataLakeVariable:void 0})),e.value.options.dataLakeVariable?m():v.value=i.getMiniWidgetLastValue(e.value.hash)}),x(()=>{e.value.options.dataLakeVariable&&s&&w(e.value.options.dataLakeVariable.id,s)}),(a,t)=>{var d,u,V,g;return _(),C("div",{class:k(["flex w-full",((d=l(i).elementToShowOnDrawer)==null?void 0:d.hash)===l(e).hash&&l(i).editingMode?"bg-[#00000010] ":"border-0"]),style:j({width:"100%",justifyContent:(u=l(e).options.layout)==null?void 0:u.align}),onClick:t[1]||(t[1]=f=>l(i).editingMode&&l(i).showElementPropsDrawer(l(e).hash))},[E("div",null,[T(B,{modelValue:n.value,"onUpdate:modelValue":[t[0]||(t[0]=f=>n.value=f),D],items:o.value,"item-title":"name","item-value":"value",disabled:!((V=l(e).value.options.dataLakeVariable)!=null&&V.allowUserToChangeValue),theme:"dark",density:"compact",variant:"filled","min-width":((g=l(e).options.layout)==null?void 0:g.width)||168,"hide-details":"",class:k(["text-white",{"pointer-events-none":l(i).editingMode}])},{default:N(()=>t[2]||(t[2]=[U(" > ")])),_:1,__:[2]},8,["modelValue","items","disabled","min-width","class"])])],6)}}}),R=H(I,[["__scopeId","data-v-c6e71308"]]);export{R as default};
