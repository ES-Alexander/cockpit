import{c as L,y as w,J as y,r as M,w as h,o as C,aM as x,h as D,l as v,m as c,s as W,H as F,v as t,t as S,x as V,S as T,N as E,aN as O,a9 as $,a1 as b}from"./index-B2XnnwRS.js";const N={key:0,class:"mr-3 mb-[3px] text-white"},j=L({__name:"Checkbox",props:{miniWidget:{}},setup(k){const a=w(),e=y(k).miniWidget,s=M(!1);let l;const f=()=>{a.editingMode||(a.setMiniWidgetLastValue(e.value.hash,s.value),e.value.options.dataLakeVariable&&O(e.value.options.dataLakeVariable.id,s.value))};h(()=>a.miniWidgetManagerVars(e.value.hash).configMenuOpen,i=>{i===!0&&(a.showElementPropsDrawer(e.value.hash),setTimeout(()=>{a.miniWidgetManagerVars(e.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0});const n=()=>{e.value.options.dataLakeVariable&&(l=$(e.value.options.dataLakeVariable.id,i=>{s.value=i}),console.log(`listening ${l}(${e.value.options.dataLakeVariable.id})`),s.value=a.getMiniWidgetLastValue(e.value.hash))};return h(()=>{var i;return(i=e.value.options.dataLakeVariable)==null?void 0:i.id},(i,o)=>{o&&l&&(console.log(`unlistening ${l}(${o})`),b(o,l)),i&&n()},{immediate:!0}),C(()=>{(!e.value.options||Object.keys(e.value.options).length===0)&&(e.value.isCustomElement=!0,a.updateElementOptions(e.value.hash,{layout:{label:"",align:"center",color:"#FFFFFF"},variableType:"boolean",dataLakeVariable:void 0})),e.value.options.dataLakeVariable&&!e.value.options.dataLakeVariable.allowUserToChangeValue&&x({...e.value.options.dataLakeVariable,allowUserToChangeValue:!0}),n()}),D(()=>{e.value.options.dataLakeVariable&&l&&b(e.value.options.dataLakeVariable.id,l)}),(i,o)=>{var r,u,d,p,m;return c(),v("div",{class:V(["flex items-center h-[30px]",((r=t(a).elementToShowOnDrawer)==null?void 0:r.hash)===t(e).hash&&t(a).editingMode?"bg-[#00000010] ":"border-0"]),style:E({justifyContent:(u=t(e).options.layout)==null?void 0:u.align}),onClick:o[1]||(o[1]=g=>t(a).editingMode&&t(a).showElementPropsDrawer(t(e).hash))},[((d=t(e).options.layout)==null?void 0:d.label)!==""?(c(),v("p",N,S((p=t(e).options.layout)==null?void 0:p.label),1)):W("",!0),F(T,{modelValue:s.value,"onUpdate:modelValue":[o[0]||(o[0]=g=>s.value=g),f],"hide-details":"",color:(m=t(e).options.layout)==null?void 0:m.color,class:V(["text-white",{"pointer-events-none":t(a).editingMode}]),theme:"dark"},null,8,["modelValue","color","class"])],6)}}});export{j as default};
