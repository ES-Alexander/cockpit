import{c as S,y as C,aP as U,r as _,w,o as E,aM as O,h as z,l as D,m as F,n as B,H as I,s as P,v as t,N as M,t as j,x as W,aQ as H,a9 as J,aJ as Q,a1 as x,aN as R,_ as $}from"./index-CccD1C_N.js";const q=S({__name:"Slider",props:{miniWidget:{}},setup(T){const o=C(),a=U(T).miniWidget,u=_(0);let s,n;const r=e=>{var i;let l;e==null||isNaN(Number(e))?l=((i=a.value.options.layout)==null?void 0:i.minValue)||0:l=Number(e),u.value=l};w(()=>o.miniWidgetManagerVars(a.value.hash).configMenuOpen,e=>{e===!0&&(o.showElementPropsDrawer(a.value.hash),setTimeout(()=>{o.miniWidgetManagerVars(a.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0});const d=()=>{a.value.options.dataLakeVariable&&(s=J(a.value.options.dataLakeVariable.id,e=>{n&&new Date().getTime()-n.getTime()<100||(n=new Date,r(e))}),r(Q(a.value.options.dataLakeVariable.id)))};w(()=>{var e;return(e=a.value.options.dataLakeVariable)==null?void 0:e.id},(e,l)=>{l&&s&&x(l,s),e&&d()});const N=e=>{var i;if(o.editingMode||!((i=a.value.options.dataLakeVariable)!=null&&i.allowUserToChangeValue))return;const l=Number(e.toFixed(1));o.setMiniWidgetLastValue(a.value.hash,l),R(a.value.options.dataLakeVariable.id,l)};return E(()=>{var e;(!a.value.options||Object.keys(a.value.options).length===0)&&(a.value.isCustomElement=!0,o.updateElementOptions(a.value.hash,{layout:{label:"",minValue:0,maxValue:100,showTooltip:!0,color:"#FFFFFF",coloredLabel:!1,labelWidth:((e=a.value.options.layout)==null?void 0:e.labelWidth)||0},variableType:"number",dataLakeVariable:void 0})),a.value.options.dataLakeVariable?(a.value.options.dataLakeVariable.allowUserToChangeValue||O({...a.value.options.dataLakeVariable,allowUserToChangeValue:!0}),d()):r(o.getMiniWidgetLastValue(a.value.hash))}),z(()=>{a.value.options.dataLakeVariable&&s&&x(a.value.options.dataLakeVariable.id,s)}),(e,l)=>{var i,p,m,b,V,h,c,v,g,L,f,k;return F(),D("div",{class:W(["slider-container",((i=t(o).elementToShowOnDrawer)==null?void 0:i.hash)===t(a).hash&&t(o).editingMode?"bg-[#00000010] ":"border-0"]),onClick:l[1]||(l[1]=y=>t(o).editingMode&&t(o).showElementPropsDrawer(t(a).hash))},[B("div",{style:M({minWidth:((p=t(a).options.layout)==null?void 0:p.labelWidth)+"px"})},[((m=t(a).options.layout)==null?void 0:m.label)!==""?(F(),D("p",{key:0,style:M({color:(b=t(a).options.layout)!=null&&b.coloredLabel?(V=t(a).options.layout)==null?void 0:V.color:"#FFFFFF"}),class:"mr-3 mb-[3px]"},j((h=t(a).options.layout)==null?void 0:h.label),5)):P("",!0)],4),I(H,{"model-value":u.value,min:(c=t(a).options.layout)==null?void 0:c.minValue,max:(v=t(a).options.layout)==null?void 0:v.maxValue,"thumb-label":(g=t(a).options.layout)==null?void 0:g.showTooltip,disabled:!((L=t(a).value.options.dataLakeVariable)!=null&&L.allowUserToChangeValue),"hide-details":"",class:W(["min-w-20",{"pointer-events-none":t(o).editingMode,"scale-75":((f=t(a).options.layout)==null?void 0:f.size)==="small"}]),color:((k=t(a).options.layout)==null?void 0:k.color)||"white","onUpdate:modelValue":l[0]||(l[0]=y=>N(y))},null,8,["model-value","min","max","thumb-label","disabled","color","class"])],2)}}}),K=$(q,[["__scopeId","data-v-aa32ba98"]]);export{K as default};
