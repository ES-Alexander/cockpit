import{c as k,y as L,J as w,r as M,w as h,o as y,aM as F,h as W,l as v,m as c,H as D,s as x,x as V,v as i,ad as C,t as S,a9 as T,aN as E,a1 as O}from"./index-DiXZ5FAH.js";const U={key:0,class:"ml-3 mb-[3px] whitespace-nowrap"},N=k({__name:"Switch",props:{miniWidget:{}},setup(b){const e=L(),s=b,a=w(s).miniWidget,o=M(!0);let r;h(()=>e.miniWidgetManagerVars(a.value.hash).configMenuOpen,t=>{t===!0&&(e.showElementPropsDrawer(a.value.hash),setTimeout(()=>{e.miniWidgetManagerVars(a.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0});const u=()=>{a.value.options.dataLakeVariable&&(r=T(a.value.options.dataLakeVariable.id,t=>{o.value=t}),o.value=e.getMiniWidgetLastValue(a.value.hash))};h(()=>{var t;return(t=a.value.options.dataLakeVariable)==null?void 0:t.id},t=>{t&&u()},{immediate:!0});const f=()=>{e.editingMode||a.value.options.dataLakeVariable&&(e.setMiniWidgetLastValue(a.value.hash,o.value),E(a.value.options.dataLakeVariable.id,o.value))};return y(()=>{var t,l,n;(!s.miniWidget.options||Object.keys(s.miniWidget.options).length===0)&&(a.value.isCustomElement=!0,e.updateElementOptions(s.miniWidget.hash,{layout:{align:((t=a.value.options.layout)==null?void 0:t.align)||"center",color:((l=a.value.options.layout)==null?void 0:l.color)||"#FFFFFF",label:((n=a.value.options.layout)==null?void 0:n.label)||""},variableType:"boolean",dataLakeVariable:void 0,toggled:!0}),o.value=!0),a.value.options.dataLakeVariable&&!a.value.options.dataLakeVariable.allowUserToChangeValue&&F({...a.value.options.dataLakeVariable,allowUserToChangeValue:!0}),u()}),W(()=>{a.value.options.dataLakeVariable&&r&&O(a.value.options.dataLakeVariable.id,r)}),(t,l)=>{var n,d,p,m;return c(),v("div",{class:V(["flex items-center h-[30px] px-4",((n=i(e).elementToShowOnDrawer)==null?void 0:n.hash)===i(a).hash&&i(e).editingMode?"bg-[#00000010] ":"border-0"]),onClick:l[1]||(l[1]=g=>i(e).editingMode&&i(e).showElementPropsDrawer(i(a).hash))},[D(C,{modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=g=>o.value=g),"hide-details":"",color:((d=i(a).options.layout)==null?void 0:d.color)||"#FFFFFF",class:V([{"pointer-events-none":i(e).editingMode},"min-w-[35px]"]),onChange:f},null,8,["modelValue","color","class"]),((p=i(a).options.layout)==null?void 0:p.label)!==""?(c(),v("p",U,S((m=i(a).options.layout)==null?void 0:m.label),1)):x("",!0)],2)}}});export{N as default};
