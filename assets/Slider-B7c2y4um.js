import{c as S,y as T,aP as C,r as _,w as y,o as U,aM as E,h as O,l as w,m as D,n as z,H as B,s as I,v as t,N as F,t as P,x as M,aQ as j,a9 as H,aJ as J,a1 as W,aN as Q,_ as R}from"./index-BllpJpx5.js";const $=S({__name:"Slider",props:{miniWidget:{}},setup(x){const l=T(),a=C(x).miniWidget,u=_(0);let s,n;const r=e=>{var i;let o;e==null||isNaN(Number(e))?o=((i=a.value.options.layout)==null?void 0:i.minValue)||0:o=Number(e),u.value=o};y(()=>l.miniWidgetManagerVars(a.value.hash).configMenuOpen,e=>{e===!0&&(l.showElementPropsDrawer(a.value.hash),setTimeout(()=>{l.miniWidgetManagerVars(a.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0});const d=()=>{a.value.options.dataLakeVariable&&(s=H(a.value.options.dataLakeVariable.id,e=>{n&&new Date().getTime()-n.getTime()<100||(n=new Date,r(e))}),r(J(a.value.options.dataLakeVariable.id)))};y(()=>{var e;return(e=a.value.options.dataLakeVariable)==null?void 0:e.id},(e,o)=>{o&&s&&W(o,s),e&&d()});const N=e=>{var i;if(l.editingMode||!((i=a.value.options.dataLakeVariable)!=null&&i.allowUserToChangeValue))return;const o=Number(e.toFixed(1));l.setMiniWidgetLastValue(a.value.hash,o),Q(a.value.options.dataLakeVariable.id,o)};return U(()=>{var e;(!a.value.options||Object.keys(a.value.options).length===0)&&(a.value.isCustomElement=!0,l.updateElementOptions(a.value.hash,{layout:{label:"",minValue:0,maxValue:100,showTooltip:!0,color:"#FFFFFF",coloredLabel:!1,labelWidth:((e=a.value.options.layout)==null?void 0:e.labelWidth)||0},variableType:"number",dataLakeVariable:void 0})),a.value.options.dataLakeVariable?(a.value.options.dataLakeVariable.allowUserToChangeValue||E({...a.value.options.dataLakeVariable,allowUserToChangeValue:!0}),d()):r(l.getMiniWidgetLastValue(a.value.hash))}),O(()=>{a.value.options.dataLakeVariable&&s&&W(a.value.options.dataLakeVariable.id,s)}),(e,o)=>{var i,p,m,b,V,c,h,v,g,f,L;return D(),w("div",{class:M(["slider-container",((i=t(l).elementToShowOnDrawer)==null?void 0:i.hash)===t(a).hash&&t(l).editingMode?"bg-[#00000010] ":"border-0"]),onClick:o[1]||(o[1]=k=>t(l).editingMode&&t(l).showElementPropsDrawer(t(a).hash))},[z("div",{style:F({minWidth:((p=t(a).options.layout)==null?void 0:p.labelWidth)+"px"})},[((m=t(a).options.layout)==null?void 0:m.label)!==""?(D(),w("p",{key:0,style:F({color:(b=t(a).options.layout)!=null&&b.coloredLabel?(V=t(a).options.layout)==null?void 0:V.color:"#FFFFFF"}),class:"mr-3 mb-[3px]"},P((c=t(a).options.layout)==null?void 0:c.label),5)):I("",!0)],4),B(j,{"model-value":u.value,min:(h=t(a).options.layout)==null?void 0:h.minValue,max:(v=t(a).options.layout)==null?void 0:v.maxValue,"thumb-label":(g=t(a).options.layout)==null?void 0:g.showTooltip,"hide-details":"",class:M(["min-w-20",{"pointer-events-none":t(l).editingMode,"scale-75":((f=t(a).options.layout)==null?void 0:f.size)==="small"}]),color:((L=t(a).options.layout)==null?void 0:L.color)||"white","onUpdate:modelValue":o[0]||(o[0]=k=>N(k))},null,8,["model-value","min","max","thumb-label","color","class"])],2)}}}),G=R($,[["__scopeId","data-v-0b8047ce"]]);export{G as default};
