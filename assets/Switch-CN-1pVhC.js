import{A as T}from"./AlertIcon-GaNVkMWE.js";import{c as B,e as E,t as S,r as O,w as f,h as d,o as P,j as z,m as y,n as c,q as w,s as A,v as L,E as I,p as N,aN as j,aO as R,H as U,y as v,z as i,B as $,a8 as q,x as H,ac as K,aK as _,a5 as M,aP as G}from"./index--MgbHU3c.js";const X=B({__name:"Switch",props:{miniWidget:{}},setup(C){const t=E(),u=C,e=S(u).miniWidget,l=O(!0);let n;f(()=>t.miniWidgetManagerVars(e.value.hash).configMenuOpen,a=>{a===!0&&(t.showElementPropsDrawer(e.value.hash),setTimeout(()=>{t.miniWidgetManagerVars(e.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0});const D=d(()=>!s.value&&!t.editingMode&&t.isRealMiniWidget(e.value.hash)),s=d(()=>{var a;return!!((a=e.value.options.dataLakeVariable)!=null&&a.id)}),m=d(()=>{var a;return((a=e.value.options.dataLakeVariable)==null?void 0:a.allowUserToChangeValue)===!0}),F=d(()=>s.value&&m.value&&!t.editingMode),g=()=>{e.value.options.dataLakeVariable&&(n=K(e.value.options.dataLakeVariable.id,a=>{l.value=!!a}),l.value=!!_(e.value.options.dataLakeVariable.id))};f(()=>{var a;return(a=e.value.options.dataLakeVariable)==null?void 0:a.id},(a,o)=>{o&&n&&M(o,n),a&&g()});const W=()=>{t.editingMode||e.value.options.dataLakeVariable&&(t.setMiniWidgetLastValue(e.value.hash,l.value),G(e.value.options.dataLakeVariable.id,l.value))};return P(()=>{var a,o,r;(!u.miniWidget.options||Object.keys(u.miniWidget.options).length===0)&&(e.value.isCustomElement=!0,t.updateElementOptions(u.miniWidget.hash,{layout:{align:((a=e.value.options.layout)==null?void 0:a.align)||"center",color:((o=e.value.options.layout)==null?void 0:o.color)||"#FFFFFF",label:((r=e.value.options.layout)==null?void 0:r.label)||""},variableType:"boolean",dataLakeVariable:void 0,toggled:!0}),l.value=!0),e.value.options.dataLakeVariable?g():l.value=t.getMiniWidgetLastValue(e.value.hash)}),z(()=>{e.value.options.dataLakeVariable&&n&&M(e.value.options.dataLakeVariable.id,n)}),(a,o)=>{var r,h;return c(),y("div",{class:v(["flex items-center h-[30px] px-4",((r=i(t).elementToShowOnDrawer)==null?void 0:r.hash)===i(e).hash&&i(t).editingMode?"bg-[#00000010] ":"border-0"]),style:H({justifyContent:(h=i(e).options.layout)==null?void 0:h.align}),onClick:o[2]||(o[2]=p=>i(t).editingMode&&i(t).showElementPropsDrawer(i(e).hash))},[w(q,{text:"This element is in display mode. To make it interactive, create or select a user-controlled data-lake variable",location:"top","open-delay":"500",disabled:m.value||!s.value},{activator:I(({props:p})=>{var b,V,k;return[N("div",j(R(p)),[w(U,{modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=x=>l.value=x),"hide-details":"",color:((b=i(e).options.layout)==null?void 0:b.color)||"#FFFFFF",class:v([{"opacity-40":!s.value,"cursor-default pointer pointer-events-none":!F.value},"min-w-[35px]"]),onChange:W},null,8,["modelValue","color","class"]),((V=i(e).options.layout)==null?void 0:V.label)!==""?(c(),y("p",{key:0,class:v(["ml-3 mb-[3px] whitespace-nowrap",{"opacity-50":!s.value}])},$((k=i(e).options.layout)==null?void 0:k.label),3)):L("",!0)],16)]}),_:1},8,["disabled"]),D.value?(c(),A(T,{key:0,icon:"mdi-connection",color:"#b9af1d",animation:"pulse",class:"absolute center ml-6 mt-[10px]",tooltip:"This element isn't connected to a data-lake variable yet. Click here to configure it.",onClick:o[1]||(o[1]=p=>i(t).showElementPropsDrawer(i(e).hash))})):L("",!0)],6)}}});export{X as default};
