import{c as w,y as M,J as y,r as D,w as h,o as F,aM as W,h as C,l as V,m as b,H as x,s as T,x as c,v as i,ad as S,t as U,a9 as E,aJ as O,a1 as k,aN as _}from"./index-CccD1C_N.js";const N={key:0,class:"ml-3 mb-[3px] whitespace-nowrap"},J=w({__name:"Switch",props:{miniWidget:{}},setup(L){const t=M(),r=L,a=y(r).miniWidget,l=D(!0);let s;h(()=>t.miniWidgetManagerVars(a.value.hash).configMenuOpen,e=>{e===!0&&(t.showElementPropsDrawer(a.value.hash),setTimeout(()=>{t.miniWidgetManagerVars(a.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0});const u=()=>{a.value.options.dataLakeVariable&&(s=E(a.value.options.dataLakeVariable.id,e=>{l.value=e}),l.value=O(a.value.options.dataLakeVariable.id))};h(()=>{var e;return(e=a.value.options.dataLakeVariable)==null?void 0:e.id},(e,o)=>{o&&s&&k(o,s),e&&u()});const f=()=>{var e;t.editingMode||!((e=a.value.options.dataLakeVariable)!=null&&e.allowUserToChangeValue)||(t.setMiniWidgetLastValue(a.value.hash,l.value),_(a.value.options.dataLakeVariable.id,l.value))};return F(()=>{var e,o,n;(!r.miniWidget.options||Object.keys(r.miniWidget.options).length===0)&&(a.value.isCustomElement=!0,t.updateElementOptions(r.miniWidget.hash,{layout:{align:((e=a.value.options.layout)==null?void 0:e.align)||"center",color:((o=a.value.options.layout)==null?void 0:o.color)||"#FFFFFF",label:((n=a.value.options.layout)==null?void 0:n.label)||""},variableType:"boolean",dataLakeVariable:void 0,toggled:!0}),l.value=!0),a.value.options.dataLakeVariable?(a.value.options.dataLakeVariable.allowUserToChangeValue||W({...a.value.options.dataLakeVariable,allowUserToChangeValue:!0}),u()):l.value=t.getMiniWidgetLastValue(a.value.hash)}),C(()=>{a.value.options.dataLakeVariable&&s&&k(a.value.options.dataLakeVariable.id,s)}),(e,o)=>{var n,d,p,g,m;return b(),V("div",{class:c(["flex items-center h-[30px] px-4",((n=i(t).elementToShowOnDrawer)==null?void 0:n.hash)===i(a).hash&&i(t).editingMode?"bg-[#00000010] ":"border-0"]),onClick:o[1]||(o[1]=v=>i(t).editingMode&&i(t).showElementPropsDrawer(i(a).hash))},[x(S,{modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=v=>l.value=v),disabled:!((d=i(a).value.options.dataLakeVariable)!=null&&d.allowUserToChangeValue),"hide-details":"",color:((p=i(a).options.layout)==null?void 0:p.color)||"#FFFFFF",class:c([{"pointer-events-none":i(t).editingMode},"min-w-[35px]"]),onChange:f},null,8,["modelValue","disabled","color","class"]),((g=i(a).options.layout)==null?void 0:g.label)!==""?(b(),V("p",N,U((m=i(a).options.layout)==null?void 0:m.label),1)):T("",!0)],2)}}});export{J as default};
